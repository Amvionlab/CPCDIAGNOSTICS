(function(i,n){typeof exports=="object"&&typeof module<"u"?n(exports):typeof define=="function"&&define.amd?define(["exports"],n):(i=typeof globalThis<"u"?globalThis:i||self,n(i["magnetic-elements"]={}))})(this,function(i){"use strict";var l=Object.defineProperty;var c=(i,n,s)=>n in i?l(i,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[n]=s;var r=(i,n,s)=>(c(i,typeof n!="symbol"?n+"":n,s),s);class n{constructor(e){r(this,"validateOptions",()=>{if(typeof this.standalone!="boolean")throw new Error("standalone value must be a boolean");if(typeof this.triggerArea!="number")throw new Error("triggerArea valu muast be a numeric value greater or equal to 0.");if(this.interpolationFactor<0)throw new Error("interpolationFactor value must be greater or equal than 0.");if(typeof this.interpolationFactor!="number")throw new Error("interpolationFactor value must be a numeric value between 0 and 1.");if(this.interpolationFactor<=0)throw new Error("interpolationFactor value must be greater than 0.");if(this.interpolationFactor>1)throw new Error("interpolationFactor value must be less than 1.");if(typeof this.magneticForce!="number")throw new Error("magneticForce value must be a numeric value between 0 and 1.");if(this.magneticForce<=0)throw new Error("magneticForce value must be greater than 0.");if(this.magneticForce>1)throw new Error("magneticForce value must be less than 1.");if(typeof this.useAbsoluteMousePosition!="boolean")throw new Error("useAbsoluteMousePosition value must be a boolean")});r(this,"lerp",(e,o,t,u)=>{const a=1-Math.pow(t,u/100);return e*(1-a)+o*a});r(this,"initEvents",()=>{window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("resize",this.onResize)});r(this,"destroy",()=>{window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("resize",this.onResize)});r(this,"onMouseMove",e=>{if(this.useAbsoluteMousePosition){this.mouse.x=e.clientX,this.mouse.y=e.clientY;return}this.mouse.x=e.pageX,this.mouse.y=e.pageY});r(this,"onResize",()=>{this.lerpingData=[];for(let e=0;e<this.magneticElements.length;e++)this.lerpingData.push({boundingClientRect:this.magneticElements[e].getBoundingClientRect(),x:{current:0,target:0},y:{current:0,target:0}})});r(this,"calculateDistance",(e,o,t,u)=>Math.hypot(e-t,o-u));r(this,"update",()=>{const e=performance.now()-this.time;this.time=performance.now();for(let o=0;o<this.lerpingData.length;o++){const t=this.lerpingData[o],u=this.calculateDistance(this.mouse.x,this.mouse.y,t.boundingClientRect.left+t.boundingClientRect.width/2,t.boundingClientRect.top+t.boundingClientRect.height/2),a={x:0,y:0};u<this.triggerArea&&(a.x=this.mouse.x-(t.boundingClientRect.left+t.boundingClientRect.width/2),a.y=this.mouse.y-(t.boundingClientRect.top+t.boundingClientRect.height/2)),t.x.target=a.x*this.magneticForce,t.y.target=a.y*this.magneticForce,Math.abs(t.x.current)<.01&&t.x.target==0&&(t.x.current=0),Math.abs(t.y.current)<.01&&t.y.target==0&&(t.y.current=0),t.x.current=this.lerp(t.x.current,t.x.target,this.interpolationFactor,e),t.y.current=this.lerp(t.y.current,t.y.target,this.interpolationFactor,e),this.magneticElements[o].style.transform=`translate(${t.x.current}px,${t.y.current}px)`}this.standalone||requestAnimationFrame(this.update)});this.standalone=(e==null?void 0:e.standalone)??!1,this.triggerArea=(e==null?void 0:e.triggerArea)??200,this.interpolationFactor=(e==null?void 0:e.interpolationFactor)??.8,this.magneticForce=(e==null?void 0:e.magneticForce)??.3,this.useAbsoluteMousePosition=e.useAbsoluteMousePosition??!1,this.validateOptions(e),this.initEvents(),this.mouse={x:0,y:0},this.magneticElements=document.querySelectorAll("[magnetic-element]"),this.onResize(),this.time=performance.now(),this.standalone||this.update()}}i.MagneticElementsController=n,Object.defineProperty(i,Symbol.toStringTag,{value:"Module"})});
